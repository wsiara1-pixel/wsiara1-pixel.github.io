<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odtwarzanie Nagrania</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 50px; background-color: #f0f0f0; }
        .container { max-width: 500px; margin: auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        #playButton { font-size: 18px; padding: 12px 25px; cursor: pointer; }
        #message { margin-top: 20px; font-size: 18px; color: #333; font-weight: bold; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Odsłuchaj nagranie</h1>
        <p>Kliknij przycisk poniżej. Nagranie zostanie odtworzone tylko raz, bez możliwości pauzy i przewijania.</p>
       
        <audio id="myAudio"></audio>

        <button id="playButton">ROZPOCZNIJ ODSŁUCHIWANIE</button>
        <p id="message"></p>
    </div>

    <script>
        const audioPlayer = document.getElementById('myAudio');
        const playButton = document.getElementById('playButton');
        const messageBox = document.getElementById('message');

        // 1. Pobierz nazwę pliku audio z adresu URL
        const urlParams = new URLSearchParams(window.location.search);
        const audioFile = urlParams.get('audio');

        if (audioFile) {
            audioPlayer.src = audioFile;
        } else {
            playButton.disabled = true;
            messageBox.textContent = 'BŁĄD: Nie znaleziono pliku audio.';
        }

        // 2. Obsługa przycisku
        playButton.addEventListener('click', () => {
            audioPlayer.play();
            playButton.style.display = 'none'; // Ukryj przycisk po kliknięciu
            messageBox.textContent = 'Odtwarzanie w toku...';
        });

        // 3. Po zakończeniu odtwarzania
        audioPlayer.addEventListener('ended', () => {
            messageBox.textContent = 'Nagranie zakończone. Teraz możesz zamknąć tę kartę i wrócić do ankiety.';
            // Próba automatycznego zamknięcia karty (może być blokowana przez przeglądarkę)
            // window.close();
        });
    </script>

</body>
</html>
